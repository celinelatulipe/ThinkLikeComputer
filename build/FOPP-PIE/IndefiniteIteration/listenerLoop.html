<!-- ****************************************
     |docname| - main template for this theme
     **************************************** -->
<!DOCTYPE html>

<html  lang="en" class="runestone-sphinx">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>11.3. The Input Listener Loop &#8212; COMP 1000: Think Like a Computer</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=E2DC0A34" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=4182B24D" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/prefix-347.f9add1ca35d5ad93.css?v=306CBB19" />
    <link rel="stylesheet" type="text/css" href="../_static/prefix-runestone.f64dcc3632d7a0c3.css?v=F4F91F21" />



    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script defer="" src="../_static/jquery.js"></script>
    <script defer="" src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script defer="" src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script defer="" src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script defer="" src="../_static/webglinteractive.js?v=2B768384"></script>
    <script defer="" src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script defer="" src="../_static/html4css1.css?v=4533ACD3"></script>
    <script defer="" src="../_static/animationbase.js?v=A043C3A7"></script>
    <script defer="" src="../_static/prefix-runtime.2438a8bdd6d43b5c.bundle.js?v=7D29D67B"></script>
    <script defer="" src="../_static/prefix-347.8328b60515045466.bundle.js?v=2CF09D3E"></script>
    <script defer="" src="../_static/prefix-runestone.aeac7cf9ad5c07ef.bundle.js?v=4FF65C30"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11.4. Indeterminate Turtles" href="RandomlyWalkingTurtles.html" />
    <link rel="prev" title="11.2. The while Statement" href="ThewhileStatement.html" />

  
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />



<link rel="canonical" href="https://{{canonical_host}}{{new_server_prefix}}/books/published/{{base_course}}/{{pagepath}}" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = false;
    eBookConfig.host = 'http://127.0.0.1:8000' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/runestone';
    eBookConfig.course = 'FOPP-PIE';
    eBookConfig.basecourse = 'FOPP-PIE';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
    eBookConfig.new_server_prefix = '';
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 0;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "good";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = 'python' ? 'python' : 'python'
  eBookConfig.runestone_version = '7.2.11';
  eBookConfig.jobehost = '';
  eBookConfig.proxyuri_runs = '';
  eBookConfig.proxyuri_files = '';
  eBookConfig.enable_chatcodes = false ? false : false;
  eBookConfig.enableScratchAC = true;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <a class="brand-logo" href="/runestone/default/user/login" aria-label="Login"><img src="../_static/img/RAIcon.png" alt=""></a>
        
        <a class="navbar-brand" id="rs-book-toc-link" href="../index.html" aria-label="index-page">
          
          FOPP-PIE
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>
        <li><span id="ad_warning"></span></li>
        <li><span id="browsing_warning"></span></li>

        <li class="divider-vertical"></li>
        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Help">Help</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='http://runestoneinteractive.org/pages/faq.html'>FAQ</a></li>
            <li><a href='https://guide.runestone.academy' target="_blank" rel="noopener noreferrer" >Instructors Guide</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=FOPP-PIE&page=listenerLoop'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>
      
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">11.2. </span>The <code class="docutils literal notranslate"><span class="pre">while</span></code> Statement" data-toggle="tooltip">
    <a href="ThewhileStatement.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">11.4. </span>Indeterminate Turtles' data-toggle="tooltip" >              
    <a href="RandomlyWalkingTurtles.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">

<!-- Ad Serving for Runestone Campaign -->


  
  <section id="the-input-listener-loop">
<span id="index-0"></span><h1><span class="section-number">11.3. </span>The Input Listener Loop<a class="headerlink" href="#the-input-listener-loop" title="Permalink to this heading">¶</a></h1>
<p>At the end of the previous section, we advised using a for loop whenever it will be known at the beginning of the
iteration process how many times the block of code needs to be executed. Usually, in Python, you will use a for loop
rather than a while loop. When is it <em>not</em> known at the beginning of the iteration how many times the code block needs
to be executed? The answer is, when it depends on something that happens <strong>during</strong> the execution.</p>
<p>One very common pattern is called a <strong>listener loop</strong>. Inside the while loop there is a function call to get user input.
The loop repeats indefinitely, until a particular input is received.</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=ac10_3_1 data-question_label="11.3.1">
<div id=ac10_3_1_question class="ac_question">

</div>
<textarea data-lang="python" id="ac10_3_1_editor" 
      data-timelimit=25000  data-codelens="true"   
    data-audio=''      
           data-wasm=/_static
     style="visibility: hidden;">
theSum = 0
x = -1
while (x != 0):
    x = int(input("next number to add up (enter 0 if no more numbers): "))
    theSum = theSum + x

print(theSum)
</textarea>
</div>
</div>
<p>This is just our old friend, the accumulation pattern, adding each additional output to the sum-so-far, which is stored
in a variable called theSum and reassigned to that variable on each iteration. Notice that theSum is initialized to 0.
Also notice that we had to initialize x, our variable that stores each input that the user types, before the while loop.
This is typical with while loops, and makes them a little tricky to read and write. We had to initialize it because the
condition <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">0</span></code> is checked at the very beginning, before the code block is ever executed. In this case, we picked
an initial value that we knew would make the condition true, to ensure that the while loop’s code block would execute at
least once.</p>
<p>If you’re at all unsure about how that code works, try adding print statements inside the while loop that print out the
values of x and theSum.</p>
<p>You’ve seen a related example to this with our interactive turtle programs that have listener functions:</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=ac10_3_2 data-question_label="11.3.2">
<div id=ac10_3_2_question class="ac_question">

</div>
<textarea data-lang="python" id="ac10_3_2_editor" 
      data-timelimit=25000     
    data-audio=''      
           data-wasm=/_static
     style="visibility: hidden;">
import turtle
import random

def random_square(tur):
    """ Post-Condition: square with random small size
        is drawn at turtle's current location """
    side = random.randrange(10, 30) # get random size
    for _ in range(4): #draw a square in location
        tur.forward(side)
        tur.left(90)
    return tur

def random_location(tur):
    """ Post-Condition: turtle is moved to a random location on canvas
        Pre-conditions: Assume canvas is 400 x 400 """
    x = random.randrange(-200, 200) # get random x location
    y = random.randrange(-200, 200) # get random y location
    tur.penup()
    tur.goto(x,y) # move to location without drawing
    tur.pendown()
    return tur

def random_colour(tur):
    """ Post-Condition: turtle is a random colour """
    tur.color(random.random(), random.random(), random.random())
    return tur

def key_r():
    """ draw randomly coloured and positioned square """
    global alex
    alex = random_colour(alex)
    alex = random_location(alex)
    alex = random_square(alex)

def key_q():
    """ close the canvas window """
    wn.bye()

def click(x, y):
    """ go to clicked location, pick random color and draw square """
    global alex
    alex.penup()
    alex.goto(x, y)
    alex.pendown()
    alex = random_colour(alex)
    alex = random_square(alex)

wn = turtle.Screen()      # Set up the window and its attributes
alex = turtle.Turtle()    # create alex
alex.speed(10)            # make alex draw fast
alex = random_colour(alex)
alex = random_location(alex)
alex = random_square(alex)

wn.onkey(key_r, 'r')    # tell the operating system to execute function 'key_r()' when the 'r' key is pressed on the keyboard
wn.onkey(key_q, 'q')    # tell the operating system to execute function 'key_q()' when the 'q' key is pressed on the keyboard
wn.onclick(click)       # tell the operating system to execute function 'click' when the user clicks the mouse
wn.listen()             # tell the operating system to listen for events on the canvas window
</textarea>
</div>
</div>
<p>In this turtle example, the last line of the code is wn.listen(). This allows us to rely on the built-in event loop that the turtle module provides. We don’t have to write the listening loop ourselves, we just tell the turtle module what events we want to listen for (the three lines of code right before the last line). The turtle graphics module will just listen for these events, in a loop, until we quit, which causes the canvas to be destroyed and the main event loop ends.</p>
<section id="other-uses-of-while">
<h2><span class="section-number">11.3.1. </span>Other uses of <code class="docutils literal notranslate"><span class="pre">while</span></code><a class="headerlink" href="#other-uses-of-while" title="Permalink to this heading">¶</a></h2>
<section id="sentinel-values">
<h3><span class="section-number">11.3.1.1. </span>Sentinel Values<a class="headerlink" href="#sentinel-values" title="Permalink to this heading">¶</a></h3>
<p>Indefinite loops are much more common in the real world than definite loops.</p>
<ul class="simple">
<li><p>If you are selling tickets to an event, you don’t know in advance how
many tickets you will sell. You keep selling tickets as long as people come
to the door and there’s room in the hall.</p></li>
<li><p>When the baggage crew unloads a plane, they don’t know in advance how many
suitcases there are. They just keep unloading while there are bags left in the
cargo hold. (Why <em>your</em> suitcase is always the last one is an entirely different problem.)</p></li>
<li><p>When you go through the checkout line at the grocery, the clerks don’t
know in advance how many items there are. They just keep ringing up items as
long as there are more on the conveyor belt.</p></li>
</ul>
<p>Let’s implement the last of these in Python, by asking the user for prices and
keeping a running total and count of items. When the last item is entered,
the program gives the grand total, number of items, and average price.
We’ll need these variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> - this will start at zero</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code> - the number of items, which also starts at zero</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">moreItems</span></code> - a boolean that tells us whether more items are waiting; this starts as True</p></li>
</ul>
<p>The pseudocode (code written half in English, half in Python) for the body of the loop
looks something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="n">moreItems</span>
    <span class="n">ask</span> <span class="k">for</span> <span class="n">price</span>
    <span class="n">add</span> <span class="n">price</span> <span class="n">to</span> <span class="n">total</span>
    <span class="n">add</span> <span class="n">one</span> <span class="n">to</span> <span class="n">count</span>
</pre></div>
</div>
<p>This pseudocode has no option to set <code class="docutils literal notranslate"><span class="pre">moreItems</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>, so it would run forever.
In a grocery store, there’s a little
plastic bar that you put after your last item to separate your groceries from
those of the person behind you; that’s how the clerk knows you have no more items.
We don’t have a “little plastic bar” data type in Python, so we’ll do the next best thing: we
will use a <code class="docutils literal notranslate"><span class="pre">price</span></code> of zero to mean “this is my last item.” In this program,
zero is a <strong>sentinel value</strong>, a value used to signal the end of the loop. Here’s the code:</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=ac10_3_3 data-question_label="11.3.1.1.1">
<div id=ac10_3_3_question class="ac_question">

</div>
<textarea data-lang="python" id="ac10_3_3_editor" 
      data-timelimit=60000  data-codelens="true"   
    data-audio=''      
           data-wasm=/_static
     style="visibility: hidden;">
def checkout():
    total = 0
    count = 0
    moreItems = True
    while moreItems:
        price = float(input('Enter price of item (0 when done): '))
        if price != 0:
            count = count + 1
            total = total + price
            print('Subtotal: $', total)
        else:
            moreItems = False
    average = total / count
    print('Total items:', count)
    print('Total $', total)
    print('Average price per item: $', average)

checkout()
</textarea>
</div>
</div>
<p>There are still a few problems with this program.</p>
<ul class="simple">
<li><p>If you enter a negative number, it will be added to the total and count. Modify the code
so that negative numbers give an error message instead (but don’t end the loop) Hint: <code class="docutils literal notranslate"><span class="pre">elif</span></code> is
your friend.</p></li>
<li><p>If you enter zero the first time you are asked for a price, the loop will end, and the program
will try to divide by zero. Use an <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> statement outside the loop to avoid the
division by zero and tell the user that you can’t compute an average without data.</p></li>
</ul>
</section>
<section id="validating-input">
<h3><span class="section-number">11.3.1.2. </span>Validating Input<a class="headerlink" href="#validating-input" title="Permalink to this heading">¶</a></h3>
<p>You can also use a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop when you want to <strong>validate</strong> input;  when you want to make
sure the user has entered valid input for a prompt. Let’s say you want a function
that asks a yes-or-no question. In this case, you want to make sure that the person using
your program enters either a Y for yes or N for no (in either upper or lower case).
Here is a program that uses a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop to keep asking until it receives a valid answer.
When you run the following code, try typing something other than Y or N to see how the code reacts:</p>

<div class="runestone explainer ac_section ">
<div data-component="activecode" id=ac10_3_4 data-question_label="11.3.1.2.1">
<div id=ac10_3_4_question class="ac_question">

</div>
<textarea data-lang="python" id="ac10_3_4_editor" 
      data-timelimit=60000  data-codelens="true"   
    data-audio=''      
           data-wasm=/_static
     style="visibility: hidden;">
def get_yes_or_no(message):
    valid_input = False
    while not valid_input:
        answer = input(message)
        answer = answer.upper() # convert to upper case
        if answer == 'Y' or answer == 'N':
            valid_input = True
        else:
            print('Please enter Y for yes or N for no.')
    return answer

response = get_yes_or_no('Do you like lima beans? Y)es or N)o: ')
if response == 'Y':
    print('Great! They are very healthy.')
else:
    print('Too bad. If cooked right, they are quite tasty.')
</textarea>
</div>
</div>
</section>
</section>
</section>


  

  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 11.2. The  while  Statement' data-toggle="tooltip">
  <a href="ThewhileStatement.html" aria-label="Previous - 11.2. The  while  Statement">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 11.4. Indeterminate Turtles' data-toggle="tooltip" >
    <a href="RandomlyWalkingTurtles.html" aria-label="Next - 11.4. Indeterminate Turtles">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2022 clatulip.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 7.2.11.
    </p>
  </div>
</footer>




<script>
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch();
  });
</script>


  </body>
</html>