<?xml version="1.0"?>
<section xml:id="event-handling_the-simplegui-module">
  <title>The SimpleGUI Module</title>
  <subsection xml:id="event-handling_module-code-skulptr-intro">
    <title>An introduction to the SimpleGUI module in CodeSkulptor 3</title>
    <p>The SimpleGUI module was created specifically to help students learn and experiment with event-based interactions. It was designed to work in a web version of Python called CodeSkulptor 3. Unfortunately, SimpleGUI is not a module that works inside the Runestone textbook, it only works in CodeSkulptor. Here is a screenshot of what CodeSkulptor 3 looks like when you first open it, and press the Run button at the top-left: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/">https://py3.codeskulptor.org/</url></p>
    <image source="EventHandling/Figures/CodeSkulptrBasic.png" width="75%"/>
    <p>This screenshot shows that CodeSkulptor 3 provides a window for entering text and a sample script to get you started. On the left are buttons for you to control the CodeSkulptor web page interface, including running, saving and loading scripts, accessing documentation, and a &#x2018;join' button that allows you to share access to your script with a classmate, so that you can work on it together.</p>
    <p>On the right there is an Output window, which is basically just a console. Any print() output will show up there.</p>
    <p>When you run the starter script that is provided, you will also see that a window pops up. This window has a canvas and a button. When this window first appears, it displays the message <q>Welcome!</q>. When you click the &#x2018;Click me' button, the message in the canvas changes to <q>Good job!</q>.</p>
    <p>Let's examine the lines of code in this script to understand what is happening.</p>
    <p>
      <ul>
        <li>
          <p>The import statement gives us access to the SimpleGUI module.</p>
          <program language="python">
            <input>
              import simplegui  # line 7
            </input>   
          </program>
        </li>
        <li>
          <p>The string "Welcome!" is assigned to variable message.</p>
          <program language="python">
            <input>
              message = "Welcome!"  # line 9
            </input>   
          </program>
        </li>
        <li>
          <p>An event handler function defines what happens when the user clicks the button with 
            line 13 giving access to the global variable message, and then line 14 changes the value of that variable to "Good job!"</p>
          <program language="python">
            <input>
              def click():  # line 12 
                      global message  
                      message = "Good job!"  
            </input>   
          </program>
        </li>
        <li>
          <p>A draw() event handler function includes a function canvas.draw_text() to specify what should be drawn on the canvas. The SimpleGUI module calls this draw() function automatically, many times per second, to redraw the canvas and keep it up to date as the user interacts with the program.</p>
          <program language="python">
            <input>
              def draw(canvas): # line 17
                     canvas.draw_text(message, [50,112], 48, "Red")  
            </input>   
          </program>
        </li>
        <li>
          <p>A window is created using the create_frame method of the SimpleGUI module. It gives the window a title (<q>Home</q>) and a size in pixels for a canvas that will be drawn on the right side of the window (the canvas in this default example is 300 pixels wide by 200 pixels tall). The window that is created is assigned to a variable called &#x2018;frame'. When you create a frame in SimpleGUI, you get an area on the left for placing interface controls and an area on the right for the canvas.</p>
          <program language="python">
            <input>
              frame = simplegui.create_frame("Home", 300, 200)  # line 21
            </input>   
          </program>
        </li>
        <li>
          <p>Then a button is added to &#x2018;frame', with the label <q>Click me</q>, and it also registers that when the button is clicked by the user, the function &#x2018;click()' should be called.</p>
          <program language="python">
            <input>
              frame.add_button("Click me", click)  # line 22
            </input>   
          </program>
        </li>
        <li>
          <p>A function calls on the frame object to allow the event handler function draw() to be registered.</p>
          <program language="python">
            <input>
              frame.set_draw_handler(draw)  # line 23
            </input>   
          </program>
        </li>
        <li>
          <p>The following statement allows the frame/window object to recognize event-based interactions.</p>
          <program language="python">
            <input>
              frame.start()  # line 26
            </input>   
          </program>
        </li>
      </ul>
    </p>
    <p>Go to CodeSkulptor 3 and play with this code: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/">https://py3.codeskulptor.org/</url>. Run the script and then do a few simple edits, testing the program after each:</p>
    <p>
      <ul>
        <li>
          <p>Change the text on the button so that it says <q>Update</q> instead of <q>Click me</q>.</p>
        </li>
        <li>
          <p>Rename the button handler to button_click instead of click. Make sure you update this in the function definition <term>and</term> in the line of code that creates the button.</p>
        </li>
        <li>
          <p>Change the button handler function so that it sets the message to be <q>Hello!</q></p>
        </li>
      </ul>
    </p>
    <p>Notice that the window that pops up when you run a CodeSkulptor script with the SimpleGUI module has a key and mouse indicator box at the bottom left of the control panel. These are provided by SimpleGUI as an aid to help novice programmers understand what mouse and keyboard events the SimpleGUI module is receiving.</p>
    <image source="EventHandling/Figures/CodeSkulptr_event_indicators.png" width="50%"/>
    <p>Later in this chapter, we will define and register event handler functions for mouse and keyboard events. You will then be able to observe how values displayed within these indicators change based on mouse clicks/keypresses.</p>
  </subsection>
  <p>
    <term>Check your understanding</term>
  </p>
  <exercise label="event-handling_the-simplegui-module_chapter10_section4_question1">
    <statement>
      <program language="python">
        <input> 
          import simplegui

          message = "Welcome!"

          def click():
              global message
              message = "Good job!"

          def draw(canvas):
              canvas.draw_text(message, [50,112], 48, "Red")

          frame = simplegui.create_frame("Home", 300, 200)
          frame.add_button("Click me", click)
          frame.set_draw_handler(draw)
          frame.start()
        </input>
      </program>
      <p></p>
      <p>What happens if you remove the line, frame.start(), and then run the program? Go to: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/"></url></p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>An error message prints in the console.</p>
        </statement>
        <feedback>
          <p>Incorrect, try running the modified code to see the effect.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>The canvas is blank and does not change when button is clicked.</p>
        </statement>
        <feedback>
          <p>This is correct!</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>The button disappears from the control panel.</p>
        </statement>
        <feedback>
          <p>Incorrect, the button is still there. Run the code to verify.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Incorrect, try running the modified code to see which of the other options is true.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_the-simplegui-module_chapter10_section4_question2">
    <statement>
      <program language="python">
        <input> 
          import simplegui

          message = "Welcome!"

          def click():
              global message
              message = "Good job!"

          def draw(canvas):
              canvas.draw_text(message, [50,112], 48, "Red")

          frame = simplegui.create_frame("Home", 300, 200)
          frame.add_button("Click me", click)
          frame.set_draw_handler(draw)
          frame.start()
        </input>
      </program>
      <p>What happens if you remove the statement, global message, and then run the program?</p>
      <p>Go to: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/"></url></p>
    </statement>
    <choices>
      <choice correct="yes">
        <statement>
          <p>Clicking the button does not change text on the canvas.</p>
        </statement>
        <feedback>
          <p>Correct!</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>The canvas is blank.</p>
        </statement>
        <feedback>
          <p>Incorrect, try running the modified code to find the answer.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>An error message prints to the console.</p>
        </statement>
        <feedback>
          <p>Incorrect, run the modified program to verify.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Incorrect, one of the above options is true.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_the-simplegui-module_chapter10_section4_question3">
    <statement>
      <program language="python">
        <input> 
          import simplegui

          message = "Welcome!"

          def click():
              global message
              message = "Good job!"

          def draw(canvas):
              canvas.draw_text(message, [50,112], 48, "Red")

          frame = simplegui.create_frame("Home", 300, 200)
          frame.add_button("Click me", click)
          frame.set_draw_handler(draw)
          frame.start()
        </input>
      </program>
      <p></p>
      <p> Review the above code to decide which line of code includes text displayed on the button.</p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>message = "Good job!"</p>
        </statement>
        <feedback>
          <p>Incorrect, the value for message is the text displayed on the canvas by clicking the button.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>canvas.draw_text(message, [50,112], 48, "Red")</p>
        </statement>
        <feedback>
          <p>Incorrect, the arguments for this function specify the details for text displayed on the canvas.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>frame = simplegui.create_frame("Home", 300, 200)</p>
        </statement>
        <feedback>
          <p>Incorrect, the arguments pertain to the details of the window.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>frame.add_button("Click me", click)</p>
        </statement>
        <feedback>
          <p>You have clicked the correct answer!</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Incorrect, review the code and its output to find the answer.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_the-simplegui-module_chapter10_section4_question4">
    <statement>
      <program language="python">
        <input> 
          import simplegui

          message = "Welcome!"

          def click():
              global message
              message = "Good job!"

          def draw(canvas):
              canvas.draw_text(message, [50,112], 48, "Red")

          frame = simplegui.create_frame("Home", 300, 200)
          frame.add_button("Click me", click)
          frame.set_draw_handler(draw)
          frame.start()
        </input>
      </program>
      <p>               </p>
      <p>Review the above code to decide which line(s) of code register(s) functions.</p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>def click():</p>
        </statement>
        <feedback>
          <p>Incorrect, this line of code defines an event handler function.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>def draw(canvas):</p>
        </statement>
        <feedback>
          <p>Incorrect, this statement defines an event handler function.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>frame = simplegui.create_frame("Home", 300, 200)</p>
        </statement>
        <feedback>
          <p>Incorrect, this line of code creates the window for event-based interactions.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>frame.add_button("Click me", click)</p>
        </statement>
        <feedback>
          <p>Although you are correct that this line of code registers the function for clicking a button, there is another correct choice.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>frame.set_draw_handler(draw)</p>
        </statement>
        <feedback>
          <p>Although you are correct that this line of code registers the function for drawing on the canvas, there is another correct choice.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>All of the following: A and B</p>
        </statement>
        <feedback>
          <p>Incorrect, these lines of code define event handler functions, not register them.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>All of the following: D and E</p>
        </statement>
        <feedback>
          <p>Correct, both these lines of code register event handler functions!</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Incorrect, one of the above options is the answer.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_the-simplegui-module_chapter10_section4_question5">
  <statement>
    <program language="python">
      <input> 
        import simplegui

        message = "Welcome!"

        def click():
            global message
            message = "Good job!"

        def draw(canvas):
            canvas.draw_text(message, [50,112], 48, "Red")

        frame = simplegui.create_frame("Home", 300, 200)
        frame.add_button("Click me", click)
        frame.set_draw_handler(draw)
        frame.start()
      </input>
    </program>
    <p></p>
    <p>Review the above code to decide which line(s) of code define(s) event handler functions.</p>
  </statement>
  <choices>
    <choice>
      <statement>
        <p>def click():</p>
      </statement>
      <feedback>
        <p>Although you are correct that this line of code defines an event handler function, there is another correct answer.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>def draw(canvas):</p>
      </statement>
      <feedback>
        <p>Although you are correct, there is another correct choice.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>frame = simplegui.create_frame("Home", 300, 200)</p>
      </statement>
      <feedback>
        <p>Incorrect, this line of code creates the window for event-based interactions.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>frame.add_button("Click me", click)</p>
      </statement>
      <feedback>
        <p>Incorrect, this line of code registers the function for clicking a button.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>frame.set_draw_handler(draw)</p>
      </statement>
      <feedback>
        <p>Incorrect, this line of code registers the function for drawing on the canvas.</p>
      </feedback>
    </choice>
    <choice correct="yes">
      <statement>
        <p>All of the following: A and B</p>
      </statement>
      <feedback>
        <p>Correct, both these lines of code define event handler functions.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>All of the following: D and E</p>
      </statement>
      <feedback>
        <p>Incorrect, both these lines of code register event handler functions, not define them.</p>
      </feedback>
    </choice>
    <choice>
      <statement>
        <p>None of the above.</p>
      </statement>
      <feedback>
        <p>Incorrect, one of the above options is the answer.</p>
      </feedback>
    </choice>
  </choices>
  </exercise>
  <subsection xml:id="event-handling_using-toolkit-documentation">
    <title>Using Toolkit Documentation</title>
    <p>There are many different toolkits that you can use for building GUIs (and for other things, too). Every toolkit handles input events slightly differently and offers slightly different sets of interface controls. So, one of the most important skills you can develop is learning how to read the documentation for a toolkit to figure out how to use it. No-one memorizes all the events and controls that a toolkit handles, unless they happen to use that toolkit every day. So, when seasoned programmers need to use a toolkit, they typically have the documentation window for that toolkit open in a browser, so they can refer to it as they build their program. Click the Docs button in the CodeSkulptor 3 interface to automatically open the documentation for you in a new browser tab: <url href="https://py3.codeskulptor.org/docs.html#tabs-Python" visual="https://py3.codeskulptor.org/docs.html#tabs-Python"></url>. Switch to this tab and then click on Graphics Modules. You should see this:</p>
    <image source="EventHandling/Figures/code_skulptr_doc_basic.png" width="75%"/>
    <p>The CodeSkulptor system has 3 different modules for graphical applications: SimpleGUI, SimpleMap and SimplePlot. We are only going to look at SimpleGUI (but you should feel free to explore the other two modules on your own). There are a number of different documentation sections for the SimpleGUI module. In order to build a GUI interface, what we are most interested in is the Control Objects, so click on that section to open it.</p>
    <image source="EventHandling/Figures/simpleGUI_controls_doc.png" width="75%"/>
    <p>When you open this you will see that you can add various controls and user input handlers to a frame: labels, buttons, text input boxes, and keyboard and mouse event handlers. We'll talk about the event handlers in the next section. For now let's look at adding text labels. Click on the Add Text Label section and you will see the following:</p>
    <image source="EventHandling/Figures/simpleGUI_textlabel_doc.png" width="75%"/>
    <p>There are three sections to the documentation for this function: <term>Syntax</term>, <term>Example</term>, and <term>See also</term>. The <term>Syntax</term> information shows how to use the command, including what parameters you need to specify. This particular documentation shows you that you can use the <c>add_label()</c> method on a window frame object. Assuming you have called your window &#x2018;frame', you simply type either &#x2018;frame.add_label(<q>Label Text</q>) or you can add a width for the size of the label, like this: &#x2018;frame.add_label(<q>Label Text</q>, 100)'. When you look at the <term>Example</term> information, it shows how to use this method in a complete code sample. Here you see that it is customary to assign a label to a variable called something like &#x2018;label1' or &#x2018;label2'. Assigning a label (or other user interface widget) to a variable means you can access that widget to do things with it. The <term>See also</term> section tells you that there are some related methods you might want to know about. In this case, the related methods allow you to get the current text that a label is showing, and also change the text that a label is showing.</p>
  </subsection>
  <p>
    <term>Check your understanding</term>
  </p>
  <exercise label="event-handling_using-toolkit-documentation_chapter10_section4_question6">
    <statement>
      <p>What is the correct order of required parameters (arguments) for the function, canvas.draw_text()?</p>
      <p> The following image shows part of the documentation associated with this function. Review the complete documentation to find the answer: <url href="https://py3.codeskulptor.org/docs.html#draw_text" visual="https://py3.codeskulptor.org/docs.html#draw_text"></url></p>
      <image source="EventHandling/Figures/ch10_section4_question6.png" width="75%"/>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>font color; font size; x,y coordinate; text</p>
        </statement>
        <feedback>
          <p>Incorrect. Consult the syntax part of the documentation for the answer.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>x,y coordinate; font size; font color; text</p>
        </statement>
        <feedback>
          <p>Incorrect, check the documentation.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>font size; text; x,y coordinate; font color</p>
        </statement>
        <feedback>
          <p>Incorrect, the documentation can help you find the answer.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>text; x,y coordinate; font size; font color</p>
        </statement>
        <feedback>
          <p>Correct!</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_using-toolkit-documentation_chapter10_section4_question7">
    <statement>
      <program language="python">
        <input> 
      import simplegui
       
      frame = simplegui.create_frame('Testing', 100, 100)
      label1 = frame.add_label('My first label')
      label2 = frame.add_label('My second label', 200)
      label3 = frame.add_label('My third label', 20)
        </input>
      </program>
      <p></p>
      <p> Copy and paste the above code into CodeSkulptor: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/"></url></p>
      <p></p>
      <p>What happens when you run this code?</p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>An error prints to the console because the statement, frame.start(), is required.</p>
        </statement>
        <feedback>
          <p>Incorrect, the code still runs without this statement.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>The first, second and third label are evenly spaced above the key and mouse indicators.</p>
        </statement>
        <feedback>
          <p>Incorrect, copy and paste this code into CodeSkulptor to find the correct answer.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>The text for the third label overlaps with the key and mouse indicators.</p>
        </statement>
        <feedback>
          <p>Correct!</p>
        </feedback>
      </choice>
      <choice >
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Actually, one of the above answers is correct. Run the code to see the output.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_using-toolkit-documentation_chapter10_section4_question8">
    <statement>
      <p>What does the argument, 20, indicate in this line of code:</p>
      <p>label3 = frame.add_label('My third label', 20)</p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>The font size for the text displayed on the label.</p>
        </statement>
        <feedback>
          <p>Incorrect, the documentation will quickly give you the answer.</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>The width size in pixels for the control panel area.</p>
        </statement>
        <feedback>
          <p>Incorrect, this argument has no effect on the control panel area.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>The width of the label.</p>
        </statement>
        <feedback>
          <p>Correct!</p>
        </feedback>
      </choice>
      <choice >
        <statement>
          <p>The width of the text displayed on the label.</p>
        </statement>
        <feedback>
          <p>Incorrect, consult the documentation for the answer.</p>
        </feedback>
      </choice>
      <choice >
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Actually, one of the above answers is correct. Consult the documentation for help.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
  <exercise label="event-handling_using-toolkit-documentation_chapter10_section4_question9">
    <statement>
      <program language="python">
        <input> 
      import simplegui
       
      frame = simplegui.create_frame('Testing', 100, 100)
      label1 = frame.add_label('My first label')
      label2 = frame.add_label('My second label', 200)
      label3 = frame.add_label('My third label', 20)
        </input>
      </program>
      <p></p>
      <p> Copy and paste the above code into CodeSkulptor: <url href="https://py3.codeskulptor.org/" visual="https://py3.codeskulptor.org/"></url></p>
      <p></p>
      <p>What effect would removing the argument, 20, have on this line of code:</p>
      <p>label3 = frame.add_label('My third label', 20)</p>
    </statement>
    <choices>
      <choice>
        <statement>
          <p>An error prints to the console because this function requires two arguments.</p>
        </statement>
        <feedback>
          <p>Incorrect, the code still runs because the removed argument is optional.</p>
        </feedback>
      </choice>
      <choice correct="yes">
        <statement>
          <p>The width of the label defaults to fit the width of the given text.</p>
        </statement>
        <feedback>
          <p>Yes, correct!</p>
        </feedback>
      </choice>
      <choice>
        <statement>
          <p>The text “My third label” is displayed on three separate lines.</p>
        </statement>
        <feedback>
          <p>Incorrect, run the code to see the actual result.</p>
        </feedback>
      </choice>
      <choice >
        <statement>
          <p>None of the above.</p>
        </statement>
        <feedback>
          <p>Actually, one of the above choices is correct. Run the code to find out the answer.</p>
        </feedback>
      </choice>
    </choices>
  </exercise>
</section>
